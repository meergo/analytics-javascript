(function(){function Bt(d,b){(b==null||b>d.length)&&(b=d.length);for(var j=0,R=new Array(b);j<b;j++)R[j]=d[j];return R}function Yr(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function e(d,b){if(!Object.prototype.hasOwnProperty.call(d,b))throw new TypeError("attempted to use private field on non-instance");return d}var ei=0;function l(d){return"__private_"+ei+++"_"+d}function mt(d,b,j){return ii()?mt=Reflect.construct:mt=function(L,ze,tt){var me=[null];me.push.apply(me,ze);var _t=Function.bind.apply(L,me),rt=new _t;return tt&&et(rt,tt.prototype),rt},mt.apply(null,arguments)}function St(d){return St=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)},St(d)}function Ct(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),b&&et(d,b)}function yt(d,b){return b!=null&&typeof Symbol!="undefined"&&b[Symbol.hasInstance]?!!b[Symbol.hasInstance](d):d instanceof b}function ti(d){return Function.toString.call(d).indexOf("[native code]")!==-1}function et(d,b){return et=Object.setPrototypeOf||function(R,L){return R.__proto__=L,R},et(d,b)}function Dt(d){"@swc/helpers - typeof";return d&&typeof Symbol!="undefined"&&d.constructor===Symbol?"symbol":typeof d}function ri(d,b){if(d){if(typeof d=="string")return Bt(d,b);var j=Object.prototype.toString.call(d).slice(8,-1);if(j==="Object"&&d.constructor&&(j=d.constructor.name),j==="Map"||j==="Set")return Array.from(j);if(j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return Bt(d,b)}}function bt(d){var b=typeof Map=="function"?new Map:void 0;return bt=function(R){if(R===null||!ti(R))return R;if(typeof R!="function")throw new TypeError("Super expression must either be null or a function");if(typeof b!="undefined"){if(b.has(R))return b.get(R);b.set(R,L)}function L(){return mt(R,arguments,St(this).constructor)}return L.prototype=Object.create(R.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),et(L,R)},bt(d)}function ii(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(d){return!1}}function Mt(d,b){var j=typeof Symbol!="undefined"&&d[Symbol.iterator]||d["@@iterator"];if(j)return(j=j.call(d)).next.bind(j);if(Array.isArray(d)||(j=ri(d))||b&&d&&typeof d.length=="number"){j&&(d=j);var R=0;return function(){return R>=d.length?{done:!0}:{done:!1,value:d[R++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(function(){var d=function(){for(var t,r=window.location.search.substring(1).replace(/\?/g,"&"),i=r.split("&"),n=0;n<i.length;n++){var s=i[n].split("utm_");if(!(s[0]!==""||s[1]===void 0)){var o=s[1].split("=");if(!(o[0]===""||o[1]===void 0||o[1]===""))try{var u=decodeURIComponent(o[1].replace(/\+/g," "));t=t||{};var c=o[0]==="campaign"?"name":o[0];t[c]=u}catch(f){}}}return t},b=function(t){if(t)return Rt?function(){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];var s;(s=console).debug.apply(s,[].concat(["["+L()+"] chichi:"],i))}:function(){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];var s;(s=console).debug.apply(s,[].concat(["%c chichi ","background:#606060;color:#eee","["+L()+"]"],i))}},j=function(t){if(t==="")return"";var r=t[0]==="_";r&&(t=t.slice(1));for(var i=atob(t),n=new Uint8Array(i.length),s=0;s<n.length;s++)n[s]=i.charCodeAt(s);return r?String.fromCharCode.apply(null,new Uint16Array(n.buffer)):_r.decode(n)},R=function(t){if(t==="")return"";var r;if(window.TextDecoder&&window.TextEncoder)r=btoa(String.fromCodePoint.apply(null,wr.encode(t)));else{for(var i=new Uint16Array(t.length),n=0;n<i.length;n++)i[n]=t.charCodeAt(n);r="_"+btoa(String.fromCharCode.apply(null,new Uint8Array(i.buffer)))}return r.replace(/=+$/,"")},L=function(){return new Date().getTime()},ze=function(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null},tt=function(t){if(typeof t!="string"||!/^https?:\/\/\S+$/.test(t))return!1;if(typeof window.URL=="function"){try{new URL(t)}catch(i){return!1}return!0}var r=document.createElement("a");return r.href=t,r.href!==""&&r.hostname!==""},me=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var n;if(Rt){var s;(s=console).error.apply(s,[].concat(["chichi:"],r));return}(n=console).error.apply(n,[].concat(["%c chichi ","background:#dc362e;color:#dcdcdc"],r))},_t=function(t){function r(){var s=document.visibilityState||document.webkitvisibilitychange;return s!=="hidden"}var i=r(),n=function(){i!==r()&&(i=!i,t(i))};document.addEventListener("visibilitychange",n),addEventListener("pagehide",n),addEventListener("pageshow",n)},rt=function(){var t=window.crypto;if(t&&typeof t.randomUUID=="function")return function(){return t.randomUUID()};if((!t||typeof t.getRandomValues!="function")&&(t=window.msCrypto),t&&typeof t.getRandomValues=="function")return function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(i){return(i^t.getRandomValues(new Uint8Array(1))[0]&15>>i/4).toString(16)})};var r=window.URL;if(r&&typeof r.createObjectURL=="function")return function(){var i=r.createObjectURL(new Blob),n=i.toString();return r.revokeObjectURL(i),n.split(/[:\/]/g).pop()}},Gt=function(t){if(typeof t=="string"&&(t=Number(t)),typeof t=="number"&&isFinite(t)&&t>0)return t},Ft=function(t){return t==="/"||typeof t=="string"&&/^[ -~]+$/.test(t)&&t.indexOf(";")===-1},jt=function(t){return typeof t=="string"&&/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)&&t===encodeURIComponent(t)},It=function(t){return typeof t=="string"&&["Lax","Strict","None"].indexOf(t)>=0},Jt=function(t){return typeof t=="string"&&Ar.indexOf(t)>=0},Vt=function(t){return typeof t=="string"&&Pr.indexOf(t)>=0},We=function(t){return t.map(function(r){return typeof r=="object"&&r!=null?"object":"string"}).join(",")},Ht=function(){if(qe){var t=window.chichianalytics,r;try{r=new $r(t.key,t.url,t.options)}catch(i){if(yt(i,Nt)){console.error(i.message);return}throw i}r.ready(function(){for(var i=["alias","anonymize","debug","endSession","getAnonymousId","getSessionId","group","identify","page","ready","reset","screen","setAnonymousId","startSession","track","user"],n=0;n<i.length;n++){var s=i[n];t[s]=r[s].bind(r)}for(var o=0;o<t.length;o++){var u,c=t[o];(u=t)[c[0]].apply(u,[].concat(c.splice(1)))}t.length=0,window.chichianalytics=r})}},Kt=function(){var t=this;if(e(this,X)[X]==null){console.warn("elections.#keep called after closure");return}e(this,X)[X]=null,e(this,it)[it](function(r,i){var n=i-L(),s=r?n-200:n+Math.floor(Math.random()*200)+1;e(t,X)[X]=setTimeout(e(t,Ne)[Ne].bind(t),s>0?s:0),e(t,be)[be](r)})},Zt=function(t){var r=this;e(this,ce)[ce](1,function(i,n){if(i!=null&&i!==e(r,T)[T]){t(!1,n);return}e(r,Be)[Be](1,e(r,T)[T],function(s){if(i===e(r,T)[T]){var o=L();if(o<n){t(!0,s);return}}e(r,ce)[ce](2,function(u,c){if(u!=null&&u!==e(r,T)[T]){t(!1,c);return}e(r,Be)[Be](2,e(r,T)[T],function(){e(r,ce)[ce](1,function(f,h){t(f===e(r,T)[T],h)})})})})})},$t=function(t,r){e(this,le)[le].read(e(this,T)[T],t,function(i){if(i!=null){var n=i.split(" "),s=n[0],o=n[1],u=L();if(Number(o)>u){r(s,o);return}}r()})},Xt=function(t,r,i){var n=L()+1200;e(this,le)[le].write(e(this,T)[T],t,r+" "+n,function(){return i(n)})},Qt=function(t,r,i,n){var s=this,o=function(h,w){if(i){var A=Math.floor(Math.random()*91)+10;setTimeout(function(){return e(s,Ce)[Ce](t,r,!1,n)},A)}else h!=null?me("An error occurred while loading the endpoint URL "+r+": "+h.message):me("The request to "+r+" encountered an unexpected HTTP status code: "+w+".")},u=function(h,w,A){var $;if(($=b(s.debug))==null||$("received endpoint response: error =",h,", status =",w+", body =",A),h!=null||w!==200&&w!==404){o(h,w);return}if(w===404){var ke=A==="error: invalid write key"?"The specified write key '"+t+"' is invalid.":"The specified endpoint URL '"+r+"' does not exist.";me(ke);return}try{var ge=JSON.parse(A);if(typeof ge!="object"||ge==null||!Vt(ge.strategy))throw null;s.strategy=ge.strategy}catch(ye){me("The response body from the endpoint URL '"+r+"' is invalid.");return}n!=null&&n()},c=r+"connection/"+encodeURIComponent(t)+"/settings";if(window.fetch&&typeof window.fetch=="function")fetch(c).then(function(h){h.status===200||h.status===404?h.text().then(function(w){return u(null,h.status,w)}).catch(function(w){return u(w)}):u(null,h.status)}).catch(function(h){return u(h)});else{var f=new XMLHttpRequest;f.open("GET",c,!0),f.onerror=function(h){return u(h)},f.onreadystatechange=function(){f.readyState===4&&u(null,f.status,f.responseText)},f.send()}},Wt=function(){for(var t=Mt(e(this,he)[he]),r;!(r=t()).done;){var i=r.value;setTimeout(i)}},Yt=function(t){var r=this;if(e(this,N)[N]){var i="";e(this,g)[g].length>0&&(i=e(this,g)[g].join("\n")+"\n"+e(this,O)[O].join(" ")+"\n"+e(this,S)[S].join(" "));var n=0;if(e(this,p)[p])for(var s=0;s<e(this,S)[S].length;s++)n+=e(this,S)[S][s];var o=!1,u=e(this,q)[q],c=u.lastIndexOf("*");c>=0&&(o=!0,u=u.slice(0,c)+qe()+u.slice(c+1));try{e(this,_e)[_e].setItem(u,i)}catch(f){if(t==null){e(this,p)[p]==null||e(this,p)[p].call(this,"cannot save '"+u+"' queue (",n,"bytes ) :",f.message);return}t=Math.min(2*t,5e3),e(this,p)[p]==null||e(this,p)[p].call(this,"cannot save '"+u+"' queue (",n,"bytes ), will retry after",t,"ms:",f.message),e(this,E)[E]=setTimeout(function(){e(r,E)[E]=null,e(r,te)[te](t)},t);return}o&&(e(this,g)[g].length=0,e(this,O)[O].length=0,e(this,S)[S].length=0),e(this,N)[N]=!1,e(this,p)[p]==null||e(this,p)[p].call(this,"saved '"+u+"' queue (",e(this,O)[O].length,"items, with a size of",n,"bytes )")}},er=function(){var t=this;return window.fetch&&typeof window.fetch=="function"?function(r,i,n,s){if(n&&typeof navigator.sendBeacon=="function"){if(e(t,v)[v]==null||e(t,v)[v].call(t,"sending",i.size,"bytes using sendBeacon"),!navigator.sendBeacon(r,i)){s(new Error("User agent is unable to queue the data for transfer"));return}setTimeout(s);return}e(t,v)[v]==null||e(t,v)[v].call(t,"sending",i.size,"bytes using fetch");var o=fetch(r,{method:"POST",cache:"no-cache",headers:{"Content-Type":"text/plain"},redirect:"error",body:i,keepalive:n});o.then(function(u){var c={status:u.status,statusText:u.statusText,retryAfter:u.headers.get("Retry-After")};s(c)},s)}:function(r,i,n,s){e(t,v)[v]==null||e(t,v)[v].call(t,"sending",i.size,"bytes using XMLHttpRequest");var o=new XMLHttpRequest;o.open("POST",r,!0),o.setRequestHeader("Content-Type","text/plain"),o.onerror=function(){s(new Error("an error occurred processing the request"))},o.onreadystatechange=function(){if(o.readyState===4){var u={status:o.status,statusText:o.statusText,retryAfter:o.getResponseHeader("Retry-After")};s(u)}},o.send(i)}},tr=function(t,r,i,n,s){var o=this,u=function(c){var f=c==null,h=f||yt(c,Error)?null:c.status,w=f?null:h===200||h===201,A=h===null||h===429||h===408||h===500||h===501&&c.retryAfter!=null||502<=h&&h<=599;if(e(o,v)[v]!=null&&!w&&!f&&!e(o,fe)[fe]&&e(o,v)[v]("failed sending",r.size,"bytes: "+(h==null?c.message:"server responded with status "+h+" "+c.statusText)),w||f||!A||e(o,fe)[fe]){s(w);return}if(!navigator.onLine){e(o,v)[v]==null||e(o,v)[v].call(o,"browser is offline, pause sending events"),e(o,W)[W]=function(){removeEventListener("online",e(o,W)[W]),e(o,W)[W]=null,e(o,v)[v]==null||e(o,v)[v].call(o,"browser is online again, retry sending events"),e(o,Oe)[Oe](t,r,i,0,s)},addEventListener("online",e(o,W)[W]);return}var $,ke=100,ge=5*1e3;if(h===429||h===501||h===503){var ye=parseInt(c.retryAfter);if(isNaN(ye))try{var gt=new Date(c.retryAfter);ye=(gt-L())/1e3}catch(Ot){}isNaN(ye)||($=Math.min(Math.floor(ye*1e3+(h===503?Math.random()*ke:0)),ge))}$==null&&($=Math.floor(Math.random()*ke+Math.min(ke*Math.pow(2,n),ge))),e(o,v)[v]==null||e(o,v)[v].call(o,"retry sending the events after a delay of",$,"ms"),e(o,ne)[ne](function(){e(o,Oe)[Oe](t,r,i,n+1,s)},$)};try{e(this,Je)[Je](t,r,i,u)}catch(c){u(c)}},rr=function(t){var r=this;if(t){if(e(this,z)[z].isEmpty()||e(this,re)[re]&&e(this,k)[k]==null)return;e(this,k)[k]!=null&&(clearTimeout(e(this,k)[k]),e(this,k)[k]=null)}else{var i=e(this,z)[z].age()+this.timeout-L();if(i>0){e(this,v)[v]==null||e(this,v)[v].call(this,"events will be sent after",i,"ms"),e(this,ne)[ne](e(this,ie)[ie],i);return}}e(this,re)[re]=!0;var n='{"batch":[',s=new Blob(['],"sentAt":"',new Date().toJSON(),'","writeKey":',e(this,Ge)[Ge],"}"]),o=(t?Rr:Lr)-n.length-s.size,u=e(this,z)[z].read(o,1),c=[];c.push(n);for(var f=0;f<u.length;f++)f>0&&c.push(","),c.push(u[f]);c.push(s);var h=new Blob(c,{type:"text/plain"});e(this,v)[v]==null||e(this,v)[v].call(this,"sending",u.length,"events of",e(this,z)[z].size(),"(",h.size,"bytes )"),e(this,Oe)[Oe](e(this,Fe)[Fe],h,t,0,function(w){e(r,fe)[fe]||(e(r,re)[re]=!1,w!=null&&e(r,z)[z].remove(u),e(r,z)[z].isEmpty()||e(r,ne)[ne](e(r,ie)[ie]))})},ir=function(t,r){var i=this;e(this,k)[k]=setTimeout(function(){e(i,k)[k]=null,t.call(i)},r)},nr=function(){for(var t=this,r=function(){if(e(t,B)[B]!=null)return[e(t,B)[B]];var u=window.location.hostname,c=u.split(".");if(c.length<3)return[u];var f=c[0][0];if("0"<=f&&f<="9")return[u];for(var h=[],w=2;w<c.length+1;w++)h.push(c.slice(-w).join("."));return h},i=r(),n="__test__",s=String(Math.floor(Math.random()*1e8)),o=0;o<i.length;o++)if(e(this,B)[B]=i[o],this.set(n,s),this.get(n)===s){this.delete(n);return}throw vt},sr=function(t){return typeof t=="string"&&t!==""||typeof t=="number"?String(t):(t=e(this,_)[_].userId(),t==null?e(this,D)[D].anonymousId():t)},or=function(t){var r=this;if(t!==e(this,K)[K]){if(e(this,K)[K]=t,!t){e(this,G)[G]==null||e(this,G)[G].call(this,"there is another leader"),e(this,H)[H].close(),e(this,H)[H]=null,e(this,P)[P].setKey(""+e(this,oe)[oe]+".*.queue"),removeEventListener("storage",e(this,ae)[ae]),e(this,ae)[ae]=null;return}e(this,G)[G]==null||e(this,G)[G].call(this,"elected as leader"),e(this,P)[P].setKey(e(this,oe)[oe]+"."+e(this,Pe)[Pe]+".queue");var i=new Set;e(this,ae)[ae]=function(f){if(e(r,K)[K]&&f.storageArea===localStorage&&f.newValue!=null){var h=f.key;!i.has(h)&&qt.test(h)&&(e(r,P)[P].load(h),localStorage.removeItem(h))}},addEventListener("storage",e(this,ae)[ae]);for(var n=0;n<localStorage.length;n++){var s=localStorage.key(n);qt.test(s)&&(e(this,P)[P].load(s),i.add(s))}if(i.size>0){e(this,P)[P].save();for(var o=Mt(i),u;!(u=o()).done;){var c=u.value;localStorage.removeItem(c)}}e(this,H)[H]=new zr(e(this,Ke)[Ke],e(this,Ze)[Ze],e(this,P)[P]),e(this,G)[G]!=null&&e(this,H)[H].debug(!0)}},ar=function(t){e(this,_)[_].setUserId(),e(this,_)[_].setGroupId(),e(this,_)[_].setTraits("user"),e(this,_)[_].setTraits("group"),e(this,_)[_].removeSuspended(),t&&(e(this,_)[_].setAnonymousId(),e(this,C)[C].end())},ur=function(t,r,i){var n=this,s=function(o,u){var c,f={type:t};i=Array.prototype.slice.call(i);var h;i.length>0&&typeof i[i.length-1]=="function"&&(h=i.pop());try{var w=r.call(n,f,i);c=e(n,ut)[ut](f,w)}catch(A){u(A);return}h&&h({attempts:1,event:c}),o({attempts:1,event:c})};if(typeof window.Promise=="function")return new Promise(s);s(zt,zt)},lr=function(t,r){r&&"timestamp"in r?t.timestamp=r.timestamp:t.timestamp=new Date;var i=window.location,n,s;{var o=document.querySelector('link[rel="canonical"]');if(o==null)n=i.href,s=i.pathname;else if(n=o.href,typeof window.URL=="function")s=new URL(n).pathname;else{var u=document.createElement("a");u.href=n,s=u.pathname!==""?u.pathname:"/"}var c=n.indexOf("#");c!==-1&&(n=n.substring(0,c))}var f={path:s,referrer:document.referrer==null?"":document.referrer,search:i.search,title:document.title,url:n};switch(t.type){case"page":{var h=ze(t.properties)?t.properties:{};for(var w in f)if(w in h){var A=h[w];typeof A=="string"&&A!==""&&(f[w]=A)}else h[w]=f[w];"category"in t&&(h.category=t.category),"name"in t&&t.name!==""&&(h.name=t.name),t.properties=h,e(this,F)[F](t);break}case"screen":case"track":ze(t.properties)||(t.properties={});case"group":e(this,F)[F](t);break;case"identify":e(this,U)[U].strategy.indexOf("-B")>0?(e(this,U)[U].strategy==="AC-B"?e(this,_)[_].suspend():e(this,_)[_].removeSuspended(),e(this,_)[_].setAnonymousId(),e(this,_)[_].setTraits("user",t.traits),e(this,_)[_].setGroupId(),e(this,_)[_].setTraits("group"),e(this,C)[C].end()):e(this,ee)[ee](e(this,D)[D],t,t.traits);break;case"anonymize":t.userId=null}t.messageId=qe(),t.anonymousId=e(this,D)[D].anonymousId();var $=navigator;t.context={library:{name:"chichi.js",version:Kr},locale:$.language||$.userLanguage,page:f,screen:{width:window.screen.width,height:window.screen.height,density:window.devicePixelRatio},userAgent:$.userAgent};var ke=d();if(ke&&(t.context.campaign=ke),t.integrations={},r&&typeof r.integrations=="object")for(var ge in r.integrations)t.integrations[ge]=r.integrations[ge];for(var ye in r)ye!=="integrations"&&r[ye]!==void 0&&(t.context[ye]=r[ye]);var gt=e(this,C)[C].getFresh(),Ot=gt[0],Wr=gt[1];Ot!=null&&(t.context.sessionId=Ot,Wr&&(t.context.sessionStart=!0));try{e(this,P)[P].append(t)}catch(Ye){if(yt(Ye,TypeError))console.warn("cannot stringify the event to JSON:",Ye);else if(yt(Ye,kt))console.warn("event size ("+Ye.size+"bytes) is greater then 32KB");else throw Ye}return t},cr=function(t,r){if(r.length===0)throw new Error("User is missing");t.userId=e(this,Te)[Te](r.shift());var i;switch(We(r)){case"":break;case"string":t.previousId=e(this,Te)[Te](r[0]);break;case"object":i=r[0];break;case"string,object":t.previousId=e(this,Te)[Te](r[0]),i=r[1];break;default:throw new Error("Invalid arguments")}return i},hr=function(t,r){if(r.length>0)throw new Error("Invalid arguments")},fr=function(t,r){var i;switch(We(r)){case"":e(this,F)[F](t);break;case"string":e(this,F)[F](t,r[0]);break;case"object":e(this,F)[F](t),t.traits=r[0];break;case"string,object":e(this,F)[F](t,r[0]),t.traits=r[1];break;case"object,object":e(this,F)[F](t),t.traits=r[0],i=r[1];break;case"string,object,object":e(this,F)[F](t,r[0]),t.traits=r[1],i=r[2];break;default:throw new Error("Invalid arguments")}return i},dr=function(t,r){t.groupId=e(this,M)[M].id(r!==null?r:void 0)},vr=function(t,r){var i;switch(We(r)){case"string":e(this,Ee)[Ee](t,r[0]),e(this,ee)[ee](e(this,M)[M],t);break;case"object":e(this,ee)[ee](e(this,M)[M],t,r[0]);break;case"string,object":e(this,Ee)[Ee](t,r[0]),e(this,ee)[ee](e(this,M)[M],t,r[1]);break;case"object,object":e(this,ee)[ee](e(this,M)[M],t,r[0]),i=r[1];break;case"string,object,object":e(this,Ee)[Ee](t,r[0]),e(this,ee)[ee](e(this,M)[M],t,r[1]),i=r[2];break;default:throw new Error("Invalid arguments")}return i},pr=function(t,r){var i;switch(We(r)){case"":break;case"string":t.name=r[0];break;case"object":t.properties=r[0];break;case"string,string":t.category=r[0],t.name=r[1];break;case"string,object":t.name=r[0],t.properties=r[1];break;case"object,object":t.properties=r[0],i=r[1];break;case"string,string,object":t.category=r[0],t.name=r[1],t.properties=r[2];break;case"string,object,object":t.name=r[0],t.properties=r[1],i=r[2];break;case"string,string,object,object":t.category=r[0],t.name=r[1],t.properties=r[2],i=r[3];break;default:throw new Error("Invalid arguments")}return i},gr=function(t,r){if(r.length===0||typeof r[0]!="string")throw new Error("Event name is missing");t.event=r.shift();var i;switch(We(r)){case"":break;case"object":t.properties=r[0];break;case"object,object":t.properties=r[0],i=r[1];break;default:throw new Error("Invalid arguments")}return i},yr=function(t,r,i){if(r.traits=t.traits(),i!==void 0)for(var n in i){var s=i[n];s===void 0?delete r.traits[n]:r.traits[n]=s}t.traits(r.traits),r.traits=t.traits()},mr=function(t,r){t.userId=e(this,D)[D].id(r!==null?r:void 0)},br=function(){for(var t=0;t<e(this,ue)[ue].length;t++){var r=e(this,ue)[ue][t],i=r[0],n=r[1];e(this,Ue)[Ue]==null||n==null?setTimeout(i):setTimeout(n,0,e(this,Ue)[Ue])}e(this,ue)[ue].length=0},T,le,be,X,Ne,it,ce,Be,Pt,Q,Ce,At,_e,q,De,g,O,S,N,E,he,p,Me,te,Tt,nt,Ge,Fe,z,re,k,Je,we,W,v,fe,st,Oe,ie,ne,Et,Se,J,Y,x,y,m,de,B,Ve,je,Ie,He,ot,xt,ve,V,pe,I,Pe,Ke,Ze,se,U,_,C,oe,P,H,D,M,Ae,K,ae,G,Te,at,$e,Z,ut,lt,ct,ht,Ee,ft,Xe,dt,ee,F,Ut,xe,ue,Ue,Le,Qe,Lt,Re,Rt=!window.ActiveXObject&&"ActiveXObject"in window,_r=typeof window.TextDecoder=="function"?new window.TextDecoder:null,wr=typeof window.TextEncoder=="function"?new window.TextEncoder:null,qe=rt(),Or=(T=l("_id"),le=l("_state"),be=l("_onElection"),X=l("_timeoutID"),Ne=l("_keep"),it=l("_tryElection"),ce=l("_getOwner"),Be=l("_setOwner"),Pt=function(){"use strict";function a(r,i,n){Object.defineProperty(this,Ne,{value:Kt}),Object.defineProperty(this,it,{value:Zt}),Object.defineProperty(this,ce,{value:$t}),Object.defineProperty(this,Be,{value:Xt}),Object.defineProperty(this,T,{writable:!0,value:void 0}),Object.defineProperty(this,le,{writable:!0,value:void 0}),Object.defineProperty(this,be,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:void 0}),e(this,T)[T]=r,e(this,le)[le]=i,e(this,be)[be]=n,e(this,X)[X]=setTimeout(e(this,Ne)[Ne].bind(this))}var t=a.prototype;return t.close=function(){clearTimeout(e(this,X)[X]),e(this,X)[X]=null},t.resign=function(){var i=this;e(this,ce)[ce](1,function(n){n===e(i,T)[T]&&e(i,le)[le].write(e(i,T)[T],1,"",function(){return e(i,be)[be](!1)})})},a}(),Pt),Sr=Or,jr=(Q=l("_storage"),function(){"use strict";function a(r){Object.defineProperty(this,Q,{writable:!0,value:void 0}),e(this,Q)[Q]=r}var t=a.prototype;return t.id=function(r){return r===null?(e(this,Q)[Q].setGroupId(),null):typeof r=="string"&&r!==""||typeof r=="number"?(r=String(r),e(this,Q)[Q].setGroupId(r),r):e(this,Q)[Q].groupId()},t.traits=function(r){return r!==void 0&&(r===null&&(r={}),e(this,Q)[Q].setTraits("group",r)),e(this,Q)[Q].traits("group")},a}()),Ir=jr,Pr=["ABC","AB-C","A-B-C","AC-B"],Ar=["multiStorage","cookieStorage","localStorage","sessionStorage","memoryStorage","none"],Tr=(Ce=l("_load"),At=function(t,r,i,n){"use strict";if(Object.defineProperty(this,Ce,{value:Qt}),this.debug=!1,this.sessions={autoTrack:!0,timeout:30*6e4},this.storage={cookie:{domain:null,maxAge:365*24*60*60*1e3,path:"/",sameSite:"lax",secure:!1},type:"multiStorage"},this.strategy="AB-C",i!=null){if(i.debug!=null&&(this.debug=!!i.debug),i.sameDomainCookiesOnly&&(this.storage.cookie.domain=""),It(i.sameSiteCookie)&&(this.storage.cookie.sameSite=i.sameSiteCookie.toLowerCase()),i.secureCookie&&(this.storage.cookie.secure=!!i.secureCookie),jt(i.setCookieDomain)&&(this.storage.cookie.domain=i.setCookieDomain),ze(i.storage)){var s=i.storage.cookie;if(ze(s)){(s.domain===""||jt(s.domain))&&(this.storage.cookie.domain=s.domain);var o=Gt(s.maxage);o!=null&&(this.storage.cookie.maxAge=o),Ft(s.path)&&(this.storage.cookie.path=s.path),It(s.samesite)&&(this.storage.cookie.sameSite=s.samesite.toLowerCase()),"secure"in s&&(this.storage.cookie.secure=!!s.secure)}Jt(i.storage.type)&&(this.storage.type=i.storage.type)}if(ze(i.sessions)){var u=i.sessions;u.autoTrack===!1&&(this.sessions.autoTrack=!1);var c=Number(u.timeout);isNaN(c)||(u.timeout>0?this.sessions.timeout=c:this.sessions.autoTrack=!1)}}t!=null&&e(this,Ce)[Ce](t,r,!0,n)},At),Er=Tr,xr=(_e=l("_storage"),q=l("_key"),De=l("_maxItemSize"),g=l("_items"),O=l("_times"),S=l("_sizes"),N=l("_toBeSaved"),E=l("_timeoutID"),he=l("_eventListeners"),p=l("_debug"),Me=l("_dispatchEvent"),te=l("_save"),Tt=function(){"use strict";function a(r,i,n){Object.defineProperty(this,Me,{value:Wt}),Object.defineProperty(this,te,{value:Yt}),Object.defineProperty(this,_e,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,De,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,N,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,he,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),e(this,g)[g]=[],e(this,O)[O]=[],e(this,S)[S]=[],e(this,N)[N]=!1,e(this,he)[he]=new Set,e(this,_e)[_e]=r,e(this,q)[q]=i,e(this,De)[De]=n}var t=a.prototype;return t.addEventListener=function(i){e(this,he)[he].add(i)},t.age=function(){return this.isEmpty()?null:e(this,O)[O][0]},t.append=function(i){var n=this,s=L();i=JSON.stringify(i);var o=new Blob([i]).size;if(o>e(this,De)[De])throw new kt(o);e(this,g)[g].push(i),e(this,O)[O].push(s),e(this,S)[S].push(o),e(this,N)[N]=!0,e(this,E)[E]==null&&(e(this,E)[E]=setTimeout(function(){e(n,E)[E]=null,e(n,te)[te](200)},20)),e(this,p)[p]==null||e(this,p)[p].call(this,"appended",o,"bytes value to the '"+e(this,q)[q]+"' queue (",e(this,g)[g].length,"events in queue )"),e(this,Me)[Me]()},t.clear=function(){e(this,g)[g].length>0&&(e(this,g)[g].length=0,e(this,O)[O].length=0,e(this,S)[S].length=0,e(this,N)[N]=!0)},t.close=function(){e(this,E)[E]!=null&&clearTimeout(e(this,E)[E]),e(this,te)[te](),e(this,p)[p]==null||e(this,p)[p].call(this,"queue closed: '"+e(this,q)[q]+"'")},t.debug=function(i){e(this,p)[p]=b(i)},t.isEmpty=function(){return e(this,g)[g].length===0},t.load=function(i){var n;try{n=e(this,_e)[_e].getItem(i)}catch($){e(this,p)[p]==null||e(this,p)[p].call(this,"cannot load '"+i+"' queue:",$.message);return}if(n==null||n===""){e(this,p)[p]==null||e(this,p)[p].call(this,"no '"+i+"' queue to load");return}try{var s=n.split("\n"),o=s.pop().split(" "),u=s.pop().split(" ");if(o.length!==s.length||u.length!==s.length)throw null;for(var c=0,f=0;f<s.length;f++)o[f]=Number(o[f]),u[f]=Number(u[f]),c+=o[f];if(this.isEmpty())e(this,g)[g]=s,e(this,O)[O]=u,e(this,S)[S]=o;else{for(var h=u.length-1,w=e(this,O)[O].length-1,A=u.length+e(this,O)[O].length-1;h>=0&&w>=0;)u[h]>e(this,O)[O][w]?(e(this,g)[g][A]=s[h],e(this,O)[O][A]=u[h],e(this,S)[S][A]=o[h],h--):(e(this,g)[g][A]=e(this,g)[g][w],e(this,O)[O][A]=e(this,O)[O][w],e(this,S)[S][A]=e(this,S)[S][w],w--),A--;for(;h>=0;)e(this,g)[g][A]=s[h],e(this,O)[O][A]=u[h],e(this,S)[S][A]=o[h],h--,A--}e(this,N)[N]=e(this,q)[q]!==i,e(this,p)[p]==null||e(this,p)[p].call(this,"loaded",s.length,"items (",c,"bytes ) from the '"+i+"' queue"),e(this,Me)[Me]()}catch($){e(this,p)[p]==null||e(this,p)[p].call(this,"cannot load the '"+i+"' queue, it is malformed:\n--begin-queue-------\n"+n+"\n--end-queue---------\n")}},t.read=function(i,n){if(i==null&&!n)return[].concat(e(this,g)[g]);for(var s=0,o=0,u=e(this,S)[S].length,c=0;c<u&&(c>0&&(o+=n),o+=e(this,S)[S][c],!(o>i));c++)s++;return e(this,g)[g].slice(0,s)},t.remove=function(i){if(!(i===null||i.length===0)){for(var n=0,s=0;s<i.length;s++){var o=e(this,g)[g].indexOf(i[s]);o>=0&&(e(this,g)[g].splice(o,1),e(this,O)[O].splice(o,1),e(this,S)[S].splice(o,1),n++)}e(this,p)[p]==null||e(this,p)[p].call(this,"removed",n,"items from the '"+e(this,q)[q]+"' queue (",e(this,g)[g].length,"item still in queue )"),n>0&&(e(this,N)[N]=!0),e(this,E)[E]!=null&&clearTimeout(e(this,E)[E]),e(this,te)[te](200)}},t.removeEventListener=function(i){e(this,he)[he].delete(i)},t.save=function(){e(this,E)[E]!=null&&clearTimeout(e(this,E)[E]),e(this,te)[te]()},t.setKey=function(i){e(this,q)[q]!==i&&(e(this,q)[q]=i,e(this,N)[N]=e(this,g)[g].length>0)},t.size=function(){return e(this,g)[g].length},a}(),Tt),kt=(nt=l("_size"),function(a){"use strict";Ct(t,a);function t(r){var i;return i=a.call(this,"The item is too large")||this,Object.defineProperty(Yr(i),nt,{writable:!0,value:void 0}),e(i,nt)[nt]=r,i.name=i.constructor.name,i}return t}(bt(Error))),Ur=xr,Lr=500*1024,Rr=64*1024,kr=(Ge=l("_writeKey"),Fe=l("_endpoint"),z=l("_queue"),re=l("_sending"),k=l("_timeoutID"),Je=l("_post"),we=l("_queueListener"),W=l("_onlineListener"),v=l("_debug"),fe=l("_closed"),st=l("_postFunc"),Oe=l("_postRetry"),ie=l("_send"),ne=l("_setTimeout"),Et=function(){"use strict";function a(r,i,n){var s=this;Object.defineProperty(this,st,{value:er}),Object.defineProperty(this,Oe,{value:tr}),Object.defineProperty(this,ie,{value:rr}),Object.defineProperty(this,ne,{value:ir}),Object.defineProperty(this,Ge,{writable:!0,value:void 0}),Object.defineProperty(this,Fe,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object.defineProperty(this,re,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,Je,{writable:!0,value:void 0}),Object.defineProperty(this,we,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,fe,{writable:!0,value:void 0}),this.timeout=300,e(this,re)[re]=!1,e(this,k)[k]=null,e(this,z)[z]=n,e(this,Ge)[Ge]=JSON.stringify(r),e(this,Fe)[Fe]=i+"batch",e(this,Je)[Je]=e(this,st)[st](),n.isEmpty()||e(this,ne)[ne](e(this,ie)[ie]),e(this,we)[we]=function(){!e(s,re)[re]&&e(s,k)[k]==null&&(e(s,v)[v]==null||e(s,v)[v].call(s,"events will be sent after",s.timeout,"ms"),e(s,ne)[ne](e(s,ie)[ie],s.timeout))},e(this,z)[z].addEventListener(e(this,we)[we])}var t=a.prototype;return t.close=function(){e(this,k)[k]!=null&&clearTimeout(e(this,k)[k]),e(this,W)[W]!=null&&removeEventListener("online",e(this,W)[W]),e(this,z)[z].removeEventListener(e(this,we)[we]),e(this,fe)[fe]=!0,e(this,v)[v]==null||e(this,v)[v].call(this,"sender closed")},t.debug=function(i){e(this,v)[v]=b(i)},t.flush=function(){e(this,ie)[ie](!0)},a}(),Et),zr=kr,qr=(Se=l("_autoTrack"),J=l("_storage"),Y=l("_timeout"),x=l("_debug"),function(){"use strict";function a(r,i,n,s){if(Object.defineProperty(this,Se,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,x,{writable:!0,value:void 0}),e(this,Se)[Se]=i,e(this,J)[J]=r,e(this,Y)[Y]=n,this.debug(s),i){var o=r.session(),u=o[0],c=o[1],f=L();(u==null||c<f)&&(e(this,x)[x]==null||e(this,x)[x].call(this,"start session",f,"with timeout",n,"ms ( there was no session )"),r.setSession(f,f+n,!0))}}var t=a.prototype;return t.debug=function(i){e(this,x)[x]=b(i)},t.end=function(){if(e(this,x)[x]){var i=e(this,J)[J].session(),n=i[0];n!=null&&e(this,x)[x]("end session",n)}e(this,J)[J].setSession()},t.getFresh=function(){var i=e(this,J)[J].session(),n=i[0],s=i[1],o=i[2],u=L();if(e(this,Se)[Se]&&(n==null||s<u)&&(n==null?e(this,x)[x]==null||e(this,x)[x].call(this,"start session",u,"with timeout",e(this,Y)[Y],"ms ( there was no session )"):e(this,x)[x]==null||e(this,x)[x].call(this,"start session",u,"with timeout",e(this,Y)[Y],"ms ( previous session is expired",u-s,"ms ago)"),n=u,o=!0),n!=null){var c=u+e(this,Y)[Y];e(this,J)[J].setSession(n,c,!1)}return[n,o]},t.get=function(){var i=e(this,J)[J].session(),n=i[0],s=i[1];if(n!=null&&e(this,Se)[Se]){var o=L();s<o&&(n=null)}return n},t.start=function(i){var n=L();i==null&&(i=L());var s=n+e(this,Y)[Y];e(this,x)[x]==null||e(this,x)[x].call(this,"start session",i,"with timeout",e(this,Y)[Y],"ms ( there was no session )"),e(this,J)[J].setSession(i,s,!0)},a}()),Nr=qr,vt=new Error("storage is not supported"),wt="Analytics: cannot stringify traits",Br=(y=l("_key"),m=l("_storage"),function(){"use strict";function a(r,i){Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0});var n="chichi."+r.slice(0,7)+".";e(this,y)[y]={anonymousId:n+"anonymousId",userId:n+"userId",groupId:n+"groupId",traits:{user:n+"userTraits",group:n+"groupTraits"},session:n+"session",suspended:n+"suspended"};var s,o=function(u){try{var c=u();s==null?s=c:s=new Gr([s,c])}catch(f){if(f!==vt)throw f}};switch(i.type){case"multiStorage":case"cookieStorage":o(function(){return new Dr(i.cookie)}),(i.type==="multiStorage"||!s)&&(o(function(){return new pt(localStorage)}),s||o(function(){return new pt(sessionStorage)}));break;case"localStorage":o(function(){return new pt(localStorage)});break;case"sessionStorage":o(function(){return new pt(sessionStorage)});break;case"none":s=new Fr}s?i.type!=="none"&&(s=new Cr(s)):s=new Mr,e(this,m)[m]=s}var t=a.prototype;return t.anonymousId=function(){return e(this,m)[m].get(e(this,y)[y].anonymousId)},t.groupId=function(){return e(this,m)[m].get(e(this,y)[y].groupId)},t.removeSuspended=function(){e(this,m)[m].delete(e(this,y)[y].suspended)},t.restore=function(){var i,n,s,o,u,c=e(this,m)[m].get(e(this,y)[y].suspended);if(c!=null){var f;f=JSON.parse(c),i=f[0],n=f[1],s=f[2],o=f[3],u=f[4]}i==null&&(i=[null,0,!1]),this.setSession.apply(this,[].concat(i)),this.setAnonymousId(n),this.setTraits("user",s),this.setGroupId(o),this.setTraits("group",u),e(this,m)[m].delete(e(this,y)[y].suspended)},t.session=function(){var i=e(this,m)[m].get(e(this,y)[y].session);return i==null?[null,0,!1]:JSON.parse(i)},t.traits=function(i){var n=e(this,m)[m].get(e(this,y)[y].traits[i]);return n==null?{}:JSON.parse(n)},t.setAnonymousId=function(i){if(i==null){e(this,m)[m].delete(e(this,y)[y].anonymousId);return}e(this,m)[m].set(e(this,y)[y].anonymousId,i)},t.setGroupId=function(i){if(i==null){e(this,m)[m].delete(e(this,y)[y].groupId);return}e(this,m)[m].set(e(this,y)[y].groupId,i)},t.setSession=function(i,n,s){if(i==null){e(this,m)[m].delete(e(this,y)[y].session);return}e(this,m)[m].set(e(this,y)[y].session,JSON.stringify([i,n,s]))},t.setTraits=function(i,n){if(typeof i!="string")throw new Error("kind is "+(typeof i=="undefined"?"undefined":Dt(i)));if(n==null){e(this,m)[m].delete(e(this,y)[y].traits[i]);return}var s=typeof n=="undefined"?"undefined":Dt(n);if(s!=="object"){console.warn(wt+": traits is a "+s);return}if(Array.isArray(n)){console.warn(wt+": "+i+" traits is an array");return}var o;try{o=JSON.stringify(n)}catch(u){console.warn(wt+": "+u.message);return}e(this,m)[m].set(e(this,y)[y].traits[i],o)},t.setUserId=function(i){i==null?e(this,m)[m].delete(e(this,y)[y].userId):e(this,m)[m].set(e(this,y)[y].userId,i)},t.suspend=function(){var i=this.session(),n=this.anonymousId(),s=this.traits("user"),o=this.groupId(),u=this.traits("group"),c=[i,n,s,o,u];e(this,m)[m].set(e(this,y)[y].suspended,JSON.stringify(c))},t.userId=function(){return e(this,m)[m].get(e(this,y)[y].userId)},a}()),Cr=(de=l("_storage"),function(){"use strict";function a(r){Object.defineProperty(this,de,{writable:!0,value:void 0}),e(this,de)[de]=r}var t=a.prototype;return t.get=function(i){var n=e(this,de)[de].get(i);if(n!=null)try{n=j(n)}catch(s){n=null}return n},t.set=function(i,n){e(this,de)[de].set(i,R(n))},t.delete=function(i){e(this,de)[de].delete(i)},a}()),Dr=(B=l("_domain"),Ve=l("_maxAge"),je=l("_path"),Ie=l("_sameSite"),He=l("_secure"),ot=l("_check"),xt=function(){"use strict";function a(r){var i;if(Object.defineProperty(this,ot,{value:nr}),Object.defineProperty(this,B,{writable:!0,value:void 0}),Object.defineProperty(this,Ve,{writable:!0,value:void 0}),Object.defineProperty(this,je,{writable:!0,value:void 0}),Object.defineProperty(this,Ie,{writable:!0,value:void 0}),Object.defineProperty(this,He,{writable:!0,value:void 0}),((i=document)==null?void 0:i.cookie)==null)throw vt;e(this,B)[B]=r.domain,e(this,Ve)[Ve]=r.maxAge,e(this,je)[je]=r.path,e(this,Ie)[Ie]=r.sameSite,e(this,He)[He]=r.secure,e(this,ot)[ot]()}var t=a.prototype;return t.get=function(i){for(var n=document.cookie,s=n.length>0?n.split("; "):[],o=0;o<s.length;o++){var u=s[o],c=u.indexOf("=");if(c===i.length&&u.substring(0,c)===i){var f=null;try{f=window.decodeURIComponent(u.substring(c+1))}catch(h){}return f}}return null},t.set=function(i,n){try{n=window.encodeURIComponent(n)}catch(o){return null}var s=new Date(Date.now()+e(this,Ve)[Ve]).toUTCString();document.cookie=i+"="+n+"; expires="+s+"; path="+e(this,je)[je]+"; samesite="+e(this,Ie)[Ie]+(e(this,He)[He]?"; secure":"")+(e(this,B)[B]===""?"":"; domain="+e(this,B)[B])},t.delete=function(i){document.cookie=i+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path="+e(this,je)[je]+"; samesite="+e(this,Ie)[Ie]+(e(this,B)[B]===""?"":"; domain="+e(this,B)[B])},a}(),xt),Mr=(ve=l("_data"),function(){"use strict";function a(){Object.defineProperty(this,ve,{writable:!0,value:void 0}),e(this,ve)[ve]={}}var t=a.prototype;return t.get=function(i){var n=e(this,ve)[ve][i];return n==null?null:n},t.set=function(i,n){e(this,ve)[ve][i]=n},t.delete=function(i){delete e(this,ve)[ve][i]},a}()),Gr=(V=l("_storages"),function(){"use strict";function a(r){Object.defineProperty(this,V,{writable:!0,value:void 0}),e(this,V)[V]=r}var t=a.prototype;return t.get=function(i){for(var n=null,s=0;s<e(this,V)[V].length&&(n=e(this,V)[V][s].get(i),n==null);s++);return n},t.set=function(i,n){for(var s=0;s<e(this,V)[V].length;s++)e(this,V)[V][s].set(i,n)},t.delete=function(i){for(var n=0;n<e(this,V)[V].length;n++)e(this,V)[V][n].delete(i)},a}()),Fr=function(){"use strict";function a(){}var t=a.prototype;return t.get=function(){return null},t.set=function(){},t.delete=function(){},a}(),pt=(pe=l("_storage"),function(){"use strict";function a(r){Object.defineProperty(this,pe,{writable:!0,value:void 0});try{r.setItem("__test__",""),r.removeItem("__test__")}catch(i){throw vt}e(this,pe)[pe]=r}var t=a.prototype;return t.get=function(i){try{return e(this,pe)[pe].getItem(i)}catch(n){return null}},t.set=function(i,n){try{e(this,pe)[pe].setItem(i,n)}catch(s){}},t.delete=function(i){try{e(this,pe)[pe].removeItem(i)}catch(n){}},a}()),Jr=Br,Vr=(I=l("_storage"),function(){"use strict";function a(r){Object.defineProperty(this,I,{writable:!0,value:void 0}),e(this,I)[I]=r}var t=a.prototype;return t.id=function(r){if(r===null)return e(this,I)[I].setUserId(),null;if(typeof r=="string"&&r!==""||typeof r=="number"){r=String(r);var i=e(this,I)[I].userId();return r!==i&&(e(this,I)[I].setUserId(r),i!=null&&(e(this,I)[I].setTraits("user"),e(this,I)[I].setAnonymousId(qe()))),r}return e(this,I)[I].userId()},t.anonymousId=function(i){return i===void 0?(i=e(this,I)[I].anonymousId(),i===null&&(i=qe())):typeof i=="number"&&(i=String(i)),typeof i=="string"&&i!==""?e(this,I)[I].setAnonymousId(i):e(this,I)[I].setAnonymousId(qe()),i},t.traits=function(r){return r!==void 0&&(r===null&&(r={}),e(this,I)[I].setTraits("user",r)),e(this,I)[I].traits("user")},a}()),Hr=Vr,Kr="0.0.0",zt=function(){},Zr=32*1024,qt=/^chichi\.[a-zA-Z0-9]{7}\.[a-zA-Z0-9]{8}(?:-[a-zA-Z0-9]{4}){3}-[a-zA-Z0-9]{12}\.queue$/,Nt=function(a){"use strict";Ct(t,a);function t(r){var i;return i=a.call(this,"The endpoint URL '"+r+"' is not valid.")||this,i.name=i.constructor.name,i}return t}(bt(Error)),$r=(Pe=l("_id"),Ke=l("_writeKey"),Ze=l("_endpoint"),se=l("_ready"),U=l("_options"),_=l("_storage"),C=l("_session"),oe=l("_keysPrefix"),P=l("_queue"),H=l("_sender"),D=l("_user"),M=l("_group"),Ae=l("_elections"),K=l("_isLeader"),ae=l("_onFollowerQueue"),G=l("_debug"),Te=l("_getAlias"),at=l("_onElection"),$e=l("_reset"),Z=l("_send"),ut=l("_sendEvent"),lt=l("_setAliasArguments"),ct=l("_setAnonymizeArguments"),ht=l("_setIdentifyArguments"),Ee=l("_setGroup"),ft=l("_setGroupArguments"),Xe=l("_setPageScreenArguments"),dt=l("_setTrackArguments"),ee=l("_mergeTraits"),F=l("_setUserId"),Ut=function(){"use strict";function a(r,i,n){var s=this;if(Object.defineProperty(this,Te,{value:sr}),Object.defineProperty(this,at,{value:or}),Object.defineProperty(this,$e,{value:ar}),Object.defineProperty(this,Z,{value:ur}),Object.defineProperty(this,ut,{value:lr}),Object.defineProperty(this,lt,{value:cr}),Object.defineProperty(this,ct,{value:hr}),Object.defineProperty(this,ht,{value:fr}),Object.defineProperty(this,Ee,{value:dr}),Object.defineProperty(this,ft,{value:vr}),Object.defineProperty(this,Xe,{value:pr}),Object.defineProperty(this,dt,{value:gr}),Object.defineProperty(this,ee,{value:yr}),Object.defineProperty(this,F,{value:mr}),Object.defineProperty(this,Pe,{writable:!0,value:void 0}),Object.defineProperty(this,Ke,{writable:!0,value:void 0}),Object.defineProperty(this,Ze,{writable:!0,value:void 0}),Object.defineProperty(this,se,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,oe,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,D,{writable:!0,value:void 0}),Object.defineProperty(this,M,{writable:!0,value:void 0}),Object.defineProperty(this,Ae,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,ae,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:void 0}),e(this,K)[K]=!1,e(this,ae)[ae]=null,!tt(i))throw new Nt(i);i.slice(-1)!=="/"&&(i+="/"),e(this,Pe)[Pe]=qe(),e(this,Ke)[Ke]=r,e(this,Ze)[Ze]=i,e(this,se)[se]=new Xr,e(this,U)[U]=new Er(r,i,n,function(u){return e(s,se)[se].emit(u)}),e(this,_)[_]=new Jr(r,e(this,U)[U].storage),e(this,C)[C]=new Nr(e(this,_)[_],e(this,U)[U].sessions.autoTrack,e(this,U)[U].sessions.timeout,e(this,U)[U].debug),e(this,oe)[oe]="chichi."+r.slice(0,7),e(this,P)[P]=new Ur(localStorage,""+e(this,oe)[oe]+".*.queue",Zr),e(this,P)[P].debug(e(this,U)[U].debug),e(this,D)[D]=new Hr(e(this,_)[_]),e(this,M)[M]=new Ir(e(this,_)[_]);var o=new Qr(e(this,oe)[oe]);e(this,Ae)[Ae]=new Sr(e(this,Pe)[Pe],o,e(this,at)[at].bind(this)),_t(function(u){u||(e(s,P)[P].save(),e(s,K)[K]&&(e(s,H)[H].flush(),e(s,Ae)[Ae].resign()))}),this.debug(e(this,U)[U].debug)}var t=a.prototype;return t.alias=function(){return e(this,Z)[Z]("alias",e(this,lt)[lt],arguments)},t.anonymize=function(){var i=e(this,Z)[Z]("anonymize",e(this,ct)[ct],arguments);return e(this,U)[U].strategy==="AC-B"?(e(this,_)[_].setUserId(),e(this,_)[_].restore()):e(this,$e)[$e](e(this,U)[U].strategy.indexOf("-C")>0),i},t.close=function(){e(this,Ae)[Ae].close(),e(this,K)[K]&&e(this,H)[H].close(),e(this,P)[P].close(),e(this,G)[G]==null||e(this,G)[G].call(this,"Analytics closed")},t.debug=function(i){e(this,G)[G]=b(i),e(this,se)[se].debug(i),e(this,C)[C].debug(i),e(this,P)[P].debug(i),e(this,K)[K]&&e(this,H)[H].debug(i)},t.endSession=function(){e(this,C)[C].end()},t.getAnonymousId=function(){return e(this,D)[D].anonymousId()},t.getSessionId=function(){return e(this,C)[C].get()},t.group=function(){return arguments.length===0?e(this,M)[M]:e(this,Z)[Z]("group",e(this,ft)[ft],arguments)},t.identify=function(){return e(this,Z)[Z]("identify",e(this,ht)[ht],arguments)},t.page=function(){return e(this,Z)[Z]("page",e(this,Xe)[Xe],arguments)},t.ready=function(i){var n=this;if(i!=null&&e(this,se)[se].addListener(i),typeof window.Promise=="function")return new Promise(function(s,o){e(n,se)[se].addListener(s,o)})},t.reset=function(){e(this,$e)[$e](!0)},t.screen=function(){return e(this,Z)[Z]("screen",e(this,Xe)[Xe],arguments)},t.setAnonymousId=function(i){return e(this,D)[D].anonymousId(i)},t.startSession=function(i){if(i){if(typeof i!="number"||i%1!==0)throw new Error("sessionId must be a positive integer")}else i=null;e(this,C)[C].start(i)},t.track=function(){return e(this,Z)[Z]("track",e(this,dt)[dt],arguments)},t.user=function(){return e(this,D)[D]},a}(),Ut),Xr=(xe=l("_emitted"),ue=l("_listeners"),Ue=l("_error"),Le=l("_debug"),Qe=l("_notify"),Lt=function(){"use strict";function a(){Object.defineProperty(this,Qe,{value:br}),Object.defineProperty(this,xe,{writable:!0,value:void 0}),Object.defineProperty(this,ue,{writable:!0,value:void 0}),Object.defineProperty(this,Ue,{writable:!0,value:void 0}),Object.defineProperty(this,Le,{writable:!0,value:void 0}),e(this,xe)[xe]=!1,e(this,ue)[ue]=[]}var t=a.prototype;return t.addListener=function(i,n){e(this,ue)[ue].push([i,n]),e(this,xe)[xe]&&e(this,Qe)[Qe]()},t.debug=function(i){e(this,Le)[Le]=b(i)},t.emit=function(i){e(this,xe)[xe]=!0,e(this,Ue)[Ue]=i,e(this,Le)[Le]==null||e(this,Le)[Le].call(this,i==null?"analytics is ready":"analytics cannot be ready due to an error: "+i),e(this,Qe)[Qe]()},a}(),Lt),Qr=(Re=l("_keys"),function(){"use strict";function a(r){Object.defineProperty(this,Re,{writable:!0,value:void 0}),e(this,Re)[Re]=[""+r+".leader.beat",""+r+".leader.election"]}var t=a.prototype;return t.read=function(i,n,s){var o=localStorage.getItem(e(this,Re)[Re][n-1]);s(o)},t.write=function(i,n,s,o){localStorage.setItem(e(this,Re)[Re][n-1],s),o()},a}());Ht()})();})();
//# sourceMappingURL=chichi.min.js.map
